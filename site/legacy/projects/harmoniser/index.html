<html>
  <head>
    <title>Harmoniser | Projects | castleman.space</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" 
    integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <link href="/projects/projects.css" type="text/css" rel="stylesheet">
    <style>
      li {
        margin-bottom: 15px;
      }

      audio {
        width: 100%;
      }

      #wave {
        margin-bottom: 1px;
      }

      .captioned-image {
        margin-bottom: 15px;
      }
    </style>
  </head>
  <body>
    <div class="container-left">
      <a href="/">Home</a>
      <h2 class="title">Harmoniser</h2>
      <h3 class="subtitle"><i>2018-19</i></h3>

      <p>In late 2018, <a href="https://github.com/johnnylindbergh" target="_blank">Johnny</a> and I 
        started working on an audio processor that would harmonize 
        live vocals with the notes specified by a MIDI controller. I took 
        inspiration from the harmoniser built for Jacob 
        Collier, which was created at MIT by <a href="https://ben.ai/" target="_blank">Ben Bloomberg</a>.</p>

      <div class="captioned-image" style="width:image width px; font-size:80%;">
        <img id="wave" src="/projects/assets/psolawave.jpeg" width="70%" style="padding-bottom:0.5em;"/><br>
        <span>A vocal sample visualized with a script we used to test our peak finding algorithm</span>
      </div>

      <p>Our harmoniser, the source for which can be found 
        <a href="https://github.com/Castleman-Lindbergh/harmoniser" target="_blank">here</a>, 
        interfaces with a microphone and MIDI keyboard. It works as follows:</p>
        
        <ol>
          <li>The pitch (if any) of the input signal from the mic (the vocal track) is detected</li>
          <li>Several copies of this signal are made, one for each note coming through
            the MIDI keyboard</li>
          <li>These signals are each pitch-shifted (using a technique called 
            <a href="https://en.wikipedia.org/wiki/PSOLA" target="_blank">Pitch Synchronous Overlap and Add</a>) to the corresponding 
            frequency of those MIDI notes</li>
          <li>All the signals are then averaged back 
            together into one, which is played back.</li>
        </ol>
  
      <p>The result is a really interesting layered vocal track that matches the notes 
        held on the MIDI keyboard.</p>

      <iframe width="560" height="315" 
      src="https://www.youtube-nocookie.com/embed/4izDn3Xud3k" frameborder="0" 
      allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen></iframe>

      <p>We even incorporated this harmoniser into a tune. Listen 
        below (as of now, unnamed, featuring Matt Wyatt, David Argo, & Thomas Castleman).</p>
      <audio
          controls
          src="MelonGong_2019Jan21.m4a">
              Your browser does not support the
              <code>audio</code> element.
      </audio>
    </div>
  </body>
</html>